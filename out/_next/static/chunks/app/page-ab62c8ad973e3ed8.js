(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6647:function(){},140:function(e,t,a){Promise.resolve().then(a.bind(a,685))},8812:function(e,t,a){"use strict";a.d(t,{_n:function(){return s}});var n=a(2269);a.n(n)().config();let s="http://localhost:3000"},685:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return app_page}});var n=a(7437);a(8345);var s=a(5266),i=a(715),r=a(3494),l=a(9050),c=a(9396),d=a(232),o=a(9872);let IconWrapper=e=>{let{children:t,...a}=e,{bgcolor:s}=a;return(0,n.jsx)(o.Z,{elevation:0,...a,sx:{display:"inline-flex",justifyContent:"center",alignItems:"center",padding:"5px",borderRadius:"10px",cursor:"pointer",backgroundColor:s||"#E8E8E8",":hover":{backgroundColor:"gray"}},children:t})};var h=a(9245);let NavBarBoxItem=e=>{let{children:t,...a}=e;return(0,n.jsx)(h.Z,{...a,sx:{display:"flex",alignItems:"center",padding:"5px",borderRadius:"10px",cursor:"pointer",width:"100%"},children:t})};var p=a(3688);let NavListItemButton=e=>{let{children:t,...a}=e;return(0,n.jsx)(p.Z,{...a,sx:{padding:"0px",borderRadius:"10px"},children:t})};var u=a(2265),x=a(1068),g=a(9839);let j=(0,u.createContext)(null),useRootContext=()=>{let e=(0,u.useContext)(j);if(!j)throw Error("useMyContext must be used within a MyContextProvider");return e};var f=a(6446);let ChapterList=e=>{let{subjectIndex:t,chosenSubject:a,listChapter:s,handleDeleteChapter:c,handleClickChapter:d,handleChangeChapter:o}=e;return useRootContext(),(0,n.jsx)(x.Z,{in:t==a,timeout:"auto",unmountOnExit:!0,children:s.map(e=>(0,n.jsx)(NavListItemButton,{style:{marginLeft:"20px"},onClick:t=>d(e.id),children:(0,n.jsxs)(NavBarBoxItem,{children:[(0,n.jsx)(IconWrapper,{children:(0,n.jsx)(g.Z,{})}),(0,n.jsx)("span",{style:{marginLeft:"10px",whiteSpace:"nowrap",flex:1,overflow:"hidden",textOverflow:"ellipsis"},children:(0,n.jsx)(i.Z,{defaultValue:e.title,disableUnderline:!0,onChange:t=>o(e.id,t.currentTarget.value)})}),(0,n.jsx)(r.Z,{title:"Delete chapter",children:(0,n.jsx)(l.Z,{sx:{margin:0,padding:0,minWidth:"unset"},onClick:t=>{t.stopPropagation(),c(e.id)},children:(0,n.jsx)(IconWrapper,{bgcolor:"transparent",children:(0,n.jsx)(f.Z,{})})})})]})},e.id))})};var C=a(2173),m=a(8812),v=a(1344);let SideNavBar=()=>{let[e,t]=(0,u.useState)([]),[a,o]=(0,u.useState)([]),[h,p]=(0,u.useState)(-1),x=useRootContext();(0,u.useEffect)(()=>{C.Z.defaults.headers.common.Authorization="Bearer ".concat(window.sessionStorage.getItem("access_token"))},[]);let handleClickSubject=e=>{h!=e&&p(e)},handleDeleteSubject=(t,a)=>{var n;return a==h&&p(-1),C.Z.delete("".concat(m._n,"/api/subjects"),{data:{subjectId:null===(n=e[a])||void 0===n?void 0:n.id}}).then(()=>updateStateListSubject())},handleChangeSubject=(t,a)=>(t.stopPropagation(),C.Z.put("".concat(m._n,"/api/subjects"),{subjectId:e[a].id,title:t.currentTarget.value})),getListSubject=async()=>{let e=await C.Z.get("".concat(m._n,"/api/subjects"));return e.data.subjects},getLearning=async()=>{let e=await C.Z.get("".concat(m._n,"/api/learning"));return e.data.learning},createNewSubject=async()=>{let e=await getLearning();return C.Z.post("".concat(m._n,"/api/subjects"),{learningId:null==e?void 0:e.id,title:"Untitled"}).then(e=>console.log("successfully created subject: ",e)).then(()=>updateStateListSubject()).catch(e=>console.log("failed to create new subject: ",e))},getListChapter=async e=>{let t=await C.Z.get("".concat(m._n,"/api/chapters/").concat(e));return t.data.chapters},createNewChapter=async(t,a)=>{var n;return t.stopPropagation(),C.Z.post("".concat(m._n,"/api/chapters"),{subjectId:null===(n=e[a])||void 0===n?void 0:n.id,title:"Untitled"}).then(()=>updateStateListChapter())},handleDeleteChapter=e=>{e==(null==x?void 0:x.chapterId)&&(null==x||x.setChapterId("")),C.Z.delete("".concat(m._n,"/api/chapters"),{data:{chapterId:e}}).then(()=>updateStateListChapter())},handleChangeChapter=(e,t)=>{C.Z.put("".concat(m._n,"/api/chapters"),{chapterId:e,title:t})},handleClickChapter=e=>{null==x||x.setChapterId(e)},updateStateListSubject=async()=>{let e=await getListSubject();t(e)},updateStateListChapter=async()=>{if(1e4!=h){var t;let a=await getListChapter(null===(t=e[h])||void 0===t?void 0:t.id);o(a)}};return(0,u.useEffect)(()=>{updateStateListChapter()},[h]),(0,u.useEffect)(()=>{updateStateListSubject()},[]),(0,n.jsxs)("div",{className:"side-bar",children:[(0,n.jsx)(NavBarBoxItem,{children:(0,n.jsxs)("p",{style:{fontWeight:"900",padding:"0px 10px",flexGrow:1},children:[" ","Recent"," "]})},"recent"),(0,n.jsx)(s.Z,{disablePadding:!0,sx:{maxHeight:"70vh",overflow:"auto"},children:e.map((e,t)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(NavListItemButton,{onClick:()=>handleClickSubject(t),children:(0,n.jsxs)(NavBarBoxItem,{children:[(0,n.jsx)(IconWrapper,{children:t==h?(0,n.jsx)(v.Z,{}):(0,n.jsx)(d.Z,{})}),(0,n.jsx)("span",{style:{marginLeft:"10px",whiteSpace:"nowrap",flex:1,overflow:"hidden",textOverflow:"ellipsis"},children:(0,n.jsx)(i.Z,{defaultValue:e.title,disableUnderline:!0,onChange:e=>handleChangeSubject(e,t)})}),(0,n.jsx)(r.Z,{title:"Delete subject",children:(0,n.jsx)(l.Z,{sx:{margin:0,padding:0,minWidth:"unset"},onClick:e=>handleDeleteSubject(e,t),children:(0,n.jsx)(IconWrapper,{bgcolor:"transparent",children:(0,n.jsx)(f.Z,{})})})}),(0,n.jsx)(r.Z,{title:"New chapter",children:(0,n.jsx)(l.Z,{sx:{margin:0,padding:0,minWidth:"unset"},onClick:e=>createNewChapter(e,t),children:(0,n.jsx)(IconWrapper,{bgcolor:"transparent",children:(0,n.jsx)(c.Z,{})})})})]},"".concat(e.id,"-item"))},e.id),(0,n.jsx)(ChapterList,{subjectIndex:t,chosenSubject:h,listChapter:a,handleDeleteChapter:handleDeleteChapter,handleClickChapter:handleClickChapter,handleChangeChapter:handleChangeChapter})]}))}),(0,n.jsx)("div",{style:{marginTop:"auto"},children:(0,n.jsxs)(l.Z,{sx:{backgroundColor:"#E8E8E8",color:"black",borderRadius:"100px",padding:"10px 20px"},onClick:createNewSubject,children:[(0,n.jsx)(c.Z,{sx:{marginRight:"10px"}})," New subject"]})})]})};var b=a(6350);a(7054);let Editor=e=>{let{onChange:t,initialContent:a,editable:s}=e,i=(0,b.bT)({initialContent:a?JSON.parse(a):void 0,onEditorContentChange:e=>{t(JSON.stringify(e.topLevelBlocks,null,2))}},[s]);return(0,u.useEffect)(()=>{},[]),(0,n.jsx)("div",{style:{overflow:"auto",width:"100%",height:"80%"},children:(0,n.jsx)(b.L6,{editor:i,theme:"light"})})};var Z=a(4986);let FlashCard=e=>{let{onDelete:t,style:a,chooseFlashcard:s,edit:i,flashcardData:c,updateFlashcards:d,editing:o}=e,[h,p]=(0,u.useState)(!1),[x,g]=(0,u.useState)(!1),[j,v]=(0,u.useState)(!1);useRootContext();let onChange=async e=>{C.Z.put("".concat(m._n,"/api/flashcards"),{flashcardId:c.id,frontContent:j?c.front_content:e,backContent:j?e:c.back_content})},b={height:"300px",backgroundColor:"white",fontSize:"14px",borderRadius:"8px",overflowY:"auto",filter:"drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25))",display:"flex",flexDirection:"column",...a};return(0,n.jsxs)("div",{className:"flashcard",style:b,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),onFocus:()=>{s(c.id)},children:[(0,n.jsxs)("header",{style:{display:"flex",flexDirection:"column",justifyContent:"center",width:"100%",padding:"8px"},children:[(0,n.jsx)("span",{style:{position:"absolute",alignSelf:"center",fontSize:"16px"},children:j?"Back":"Front"}),(0,n.jsx)("div",{style:{opacity:h?1:0,alignSelf:"flex-end"},children:(0,n.jsx)(r.Z,{title:"Delete",children:(0,n.jsx)(l.Z,{sx:{margin:0,padding:0,minWidth:"unset"},onClick:()=>t(c.id),children:(0,n.jsx)(IconWrapper,{children:(0,n.jsx)(f.Z,{})})})})})]}),(0,n.jsx)(Z.Z,{variant:"middle",sx:{mb:1}}),(0,n.jsx)(Editor,{onChange:onChange,initialContent:j?c.back_content:c.front_content,editable:i}),(0,n.jsxs)("footer",{style:{display:"flex",flexGrow:1,alignItems:"center",justifyContent:"space-evenly"},children:[o&&(0,n.jsxs)(l.Z,{variant:"outlined",onClick:()=>{v(!j),d()},children:[" ","Flip"," "]}),x&&(0,n.jsx)(l.Z,{variant:"outlined",children:" Flip "})]})]})};var w=a(9927),y=a(4329),S=a(3027);let FlashcardDialog=e=>{let{children:t,chooseFlashcard:a,updateFlashcards:s}=e,[i,r]=(0,u.useState)(!0),[l,c]=(0,u.useState)(!1);return(0,n.jsx)(S.Z,{open:i,onClose:async()=>{r(!1),a(""),s()},children:t})},MainMenu=()=>{let[e,t]=(0,u.useState)([]),[a,s]=(0,u.useState)(""),[i,c]=(0,u.useState)(!1),d=useRootContext(),getFlashcards=async()=>{if((null==d?void 0:d.chapterId)!=""){let e=await C.Z.get("".concat(m._n,"/api/flashcards/").concat(null==d?void 0:d.chapterId)).then(e=>e.data.flashcards);return e}return[]},addFlashcard=async()=>{C.Z.post("".concat(m._n,"/api/flashcards"),{chapterId:null==d?void 0:d.chapterId,frontContent:"",backContent:""}).then(()=>updateFlashcards())},deleteFlashcard=async e=>{C.Z.delete("".concat(m._n,"/api/flashcards"),{data:{flashcardId:e}}).then(()=>updateFlashcards())},updateFlashcards=async()=>{getFlashcards().then(e=>t(e)).then(()=>changeContent())},changeContent=()=>{c(!i)};return(0,u.useEffect)(()=>{updateFlashcards()},[null==d?void 0:d.chapterId]),(0,n.jsxs)("div",{className:"main-menu",style:{padding:"20px"},children:[(0,n.jsxs)("div",{className:"function-bar",style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[(0,n.jsxs)("span",{className:"name",style:{fontSize:"20px"},children:[" ","Flashcards"," "]}),(0,n.jsxs)("div",{className:"function",style:{display:"flex",gap:"10px"},children:[(0,n.jsx)(r.Z,{title:"Add flashcard",children:(0,n.jsx)(l.Z,{sx:{margin:0,padding:0,minWidth:"unset"},onClick:addFlashcard,children:(0,n.jsx)(IconWrapper,{children:(0,n.jsx)(w.Z,{})})})}),(0,n.jsx)(r.Z,{title:"Take a test",children:(0,n.jsx)(l.Z,{sx:{margin:0,padding:0,minWidth:"unset"},onClick:()=>null==d?void 0:d.setReadyTest(!0),children:(0,n.jsx)(IconWrapper,{children:(0,n.jsx)(y.Z,{})})})})]})]}),e&&(0,n.jsx)("div",{className:"flashcard-container",style:{display:"inline-grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"20px",width:"100%"},children:e.map((e,t)=>e.id==a?(0,n.jsx)(FlashcardDialog,{chooseFlashcard:s,updateFlashcards:updateFlashcards,children:(0,n.jsx)(FlashCard,{flashcardData:e,onDelete:deleteFlashcard,chooseFlashcard:s,edit:i,updateFlashcards:updateFlashcards,editing:!0,style:{width:"500px",height:"700px"}},e.id)},"".concat(e.id,"-dialog")):(0,n.jsx)(FlashCard,{flashcardData:e,onDelete:deleteFlashcard,chooseFlashcard:s,edit:i,updateFlashcards:updateFlashcards,editing:!1},"".concat(e.id,"-flashcard")))})]})};var k=a(4033),I=a(7473),N=a(7),F=a(2582);function IndeterminateCheckbox(e){let{subjectWithChapters:t}=e,[a,s]=u.useState(!1),[i,r]=u.useState(Array(t.chapters.length).fill(!1)),handleChildChange=e=>t=>{let a=[...i];a[e]=t.target.checked,r(a);let n=a.every(e=>e);s(n)};return(0,n.jsxs)(F.Z,{children:[(0,n.jsx)(N.Z,{control:(0,n.jsx)(I.Z,{checked:a,onChange:e=>{let a=e.target.checked;s(a),r(Array(t.chapters.length).fill(a))}}),label:t.title}),t.chapters.map((e,t)=>(0,n.jsx)(N.Z,{sx:{ml:3},control:(0,n.jsx)(I.Z,{checked:i[t],onChange:handleChildChange(t)}),label:"".concat(e.title)},t))]})}let ReadyTestMenu=()=>{let[e,t]=(0,u.useState)([]),getSubjectsWithChapters=async()=>{let e=await C.Z.get("".concat(m._n,"/api/subjects")).then(e=>e.data.subjects),a=[];for(let t=0;t<e.length;t++){let n=await C.Z.get("".concat(m._n,"/api/chapters/").concat(e[t].id)),s={id:e[t].id,title:e[t].title,chapters:n.data.chapters};a.push(s)}t(a)};return(0,u.useEffect)(()=>{getSubjectsWithChapters()},[]),(0,n.jsx)("div",{className:"ready-test-menu",style:{padding:"20px"},children:e.map(e=>(0,n.jsx)(IndeterminateCheckbox,{subjectWithChapters:e},"".concat(e.id,"-indeterminate-checkbox")))})},SideNavBarTest=()=>(0,n.jsxs)("div",{className:"side-bar",children:[(0,n.jsx)(NavBarBoxItem,{children:(0,n.jsx)("p",{style:{padding:"0px 10px",flexGrow:1,fontSize:"16px",textTransform:"uppercase"},children:"Select chapters for the test and start test your knowledge"})},"recent"),(0,n.jsxs)("div",{style:{display:"flex",marginTop:"auto",width:"100%",justifyContent:"space-evenly"},children:[(0,n.jsx)(l.Z,{sx:{backgroundColor:"#E8E8E8",color:"black",borderRadius:"100px",padding:"10px 20px"},children:"Start"}),(0,n.jsx)(l.Z,{sx:{backgroundColor:"#E8E8E8",color:"black",borderRadius:"100px",padding:"10px 20px"},children:"Cancel"})]})]});var E=a(5843),L=a(9975),_=a(1867),B=a(4989),R=a(2653),W=a(3226),D=a(8599),M=a(4142),T=a(3932),z=a(2513),P=a(2477),O=a(2486),A=a(7011);(0,E.ZP)("div")(e=>{let{theme:t}=e;return{position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:(0,L.Fq)(t.palette.common.white,.15),"&:hover":{backgroundColor:(0,L.Fq)(t.palette.common.white,.25)},marginRight:t.spacing(2),marginLeft:0,width:"100%",[t.breakpoints.up("sm")]:{marginLeft:t.spacing(3),width:"auto"}}}),(0,E.ZP)("div")(e=>{let{theme:t}=e;return{padding:t.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}),(0,E.ZP)(D.ZP)(e=>{let{theme:t}=e;return{color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%",[t.breakpoints.up("md")]:{width:"20ch"}}}});let NavBar=()=>{let[e,t]=u.useState(null),[a,s]=u.useState(!1);u.useEffect(()=>{let e=window.sessionStorage.getItem("access_token");null!==e&&s(!0)},[]);let handleMenuClose=()=>{t(null)},i="primary-search-account-menu",r=(0,n.jsxs)(T.Z,{anchorEl:e,anchorOrigin:{vertical:"top",horizontal:"right"},id:i,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!e,onClose:handleMenuClose,children:[(0,n.jsx)(M.Z,{onClick:handleMenuClose,children:"Profile"}),(0,n.jsx)(M.Z,{onClick:handleMenuClose,children:"My account"}),(0,n.jsx)(M.Z,{onClick:()=>{window.location.href="/settings",t(null)},children:"Setting"}),(0,n.jsx)(M.Z,{onClick:()=>{window.sessionStorage.clear(),window.location.href="pages/auth/login",t(null)},children:"Log out"})]}),l=(0,n.jsx)(h.Z,{sx:{display:{xs:"none",md:"flex"}},children:(0,n.jsx)(R.Z,{size:"large",edge:"end","aria-label":"account of current user","aria-controls":i,"aria-haspopup":"true",onClick:e=>{t(e.currentTarget)},color:"inherit",children:(0,n.jsx)(P.Z,{})})}),c=(0,n.jsxs)(h.Z,{sx:{display:{xs:"none",md:"flex"}},children:[(0,n.jsxs)(R.Z,{size:"small",color:"inherit","aria-label":"Login",onClick:()=>window.location.href="/pages/auth/login",children:[(0,n.jsx)(O.Z,{}),"Login"]}),(0,n.jsxs)(R.Z,{size:"small",color:"inherit","aria-label":"Sign up",onClick:()=>window.location.href="/pages/auth/signup",children:[(0,n.jsx)(A.Z,{}),"Sign up"]})]});return(0,n.jsxs)(h.Z,{sx:{flexGrow:1},children:[(0,n.jsx)(_.Z,{position:"static",children:(0,n.jsxs)(B.Z,{children:[(0,n.jsx)(R.Z,{size:"large",edge:"start",color:"inherit","aria-label":"open drawer",sx:{mr:2},children:(0,n.jsx)(z.Z,{})}),(0,n.jsx)(W.Z,{variant:"h6",noWrap:!0,component:"div",sx:{display:{xs:"none",sm:"block"}},children:(0,n.jsx)(R.Z,{size:"large",color:"inherit","aria-label":"Title",onClick:()=>window.location.href="/",children:"DAILY"})}),(0,n.jsx)(h.Z,{sx:{flexGrow:1}}),a?l:c]})}),r]})};var app_page=()=>{let e=(0,k.useRouter)(),[t,a]=(0,u.useState)(!1),[s,i]=(0,u.useState)(""),[r,l]=(0,u.useState)(!0);return((0,u.useEffect)(()=>{C.Z.defaults.headers.common.Authorization="Bearer ".concat(window.sessionStorage.getItem("access_token"));let t=window.sessionStorage.getItem("access_token"),n=null!==t;a(n),n||e.push("/pages/auth/login")},[]),(0,u.useEffect)(()=>{},[s]),t)?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(j.Provider,{value:{chapterId:s,setChapterId:i,readyTest:r,setReadyTest:l},children:[(0,n.jsx)("header",{children:(0,n.jsx)(NavBar,{})}),(0,n.jsxs)("div",{className:"container",children:[!r&&(0,n.jsx)(SideNavBar,{}),r&&(0,n.jsx)(SideNavBarTest,{}),!r&&(0,n.jsx)(MainMenu,{}),r&&(0,n.jsx)(ReadyTestMenu,{})]})]})}):(0,n.jsx)("div",{children:"Hello"})}},8345:function(){}},function(e){e.O(0,[218,900,572,866,333,27,860,971,864,744],function(){return e(e.s=140)}),_N_E=e.O()}]);