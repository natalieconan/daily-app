(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6647:function(){},140:function(e,t,a){Promise.resolve().then(a.bind(a,3342))},8812:function(e,t,a){"use strict";a.d(t,{_n:function(){return s}});var n=a(2269);a.n(n)().config();let s="http://localhost:3000"},3342:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return app_page}});var n=a(7437);a(8345);var s=a(2265),r=a(1867),i=a(9245),l=a(4989),c=a(3226),d=a(2653),o=a(2513);function ButtonAppBar(){return(0,n.jsx)(i.Z,{sx:{flexGrow:1,height:"64px",backgroundColor:"black"},children:(0,n.jsx)(r.Z,{position:"static",children:(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(d.Z,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:(0,n.jsx)(o.Z,{})}),(0,n.jsx)(c.Z,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Learning"})]})})})}var h=a(5266),p=a(715),u=a(3494),x=a(9050),j=a(9396),g=a(232),f=a(9872);let IconWrapper=e=>{let{children:t,...a}=e,{bgcolor:s}=a;return(0,n.jsx)(f.Z,{elevation:0,...a,sx:{display:"inline-flex",justifyContent:"center",alignItems:"center",padding:"5px",borderRadius:"10px",cursor:"pointer",backgroundColor:s||"#E8E8E8",":hover":{backgroundColor:"gray"}},children:t})},NavBarBoxItem=e=>{let{children:t,...a}=e;return(0,n.jsx)(i.Z,{...a,sx:{display:"flex",alignItems:"center",padding:"5px",borderRadius:"10px",cursor:"pointer",width:"100%"},children:t})};var C=a(3688);let NavListItemButton=e=>{let{children:t,...a}=e;return(0,n.jsx)(C.Z,{...a,sx:{padding:"0px",borderRadius:"10px"},children:t})};var v=a(1068),b=a(9839);let m=(0,s.createContext)(null),useRootContext=()=>{let e=(0,s.useContext)(m);if(!m)throw Error("useMyContext must be used within a MyContextProvider");return e};var y=a(6446);let ChapterList=e=>{let{subjectIndex:t,chosenSubject:a,listChapter:s,handleDeleteChapter:r,handleClickChapter:i,handleChangeChapter:l}=e;return useRootContext(),(0,n.jsx)(v.Z,{in:t==a,timeout:"auto",unmountOnExit:!0,children:s.map(e=>(0,n.jsx)(NavListItemButton,{style:{marginLeft:"20px"},onClick:t=>i(e.id),children:(0,n.jsxs)(NavBarBoxItem,{children:[(0,n.jsx)(IconWrapper,{children:(0,n.jsx)(b.Z,{})}),(0,n.jsx)("span",{style:{marginLeft:"10px",whiteSpace:"nowrap",flex:1,overflow:"hidden",textOverflow:"ellipsis"},children:(0,n.jsx)(p.Z,{defaultValue:e.title,disableUnderline:!0,onChange:t=>l(e.id,t.currentTarget.value)})}),(0,n.jsx)(u.Z,{title:"Delete chapter",children:(0,n.jsx)(x.Z,{sx:{margin:0,padding:0,minWidth:"unset"},onClick:t=>{t.stopPropagation(),r(e.id)},children:(0,n.jsx)(IconWrapper,{bgcolor:"transparent",children:(0,n.jsx)(y.Z,{})})})})]})},e.id))})};var Z=a(2173),S=a(8812),w=a(1344);let SideNavBar=()=>{let[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)([]),[i,l]=(0,s.useState)(-1),c=useRootContext();(0,s.useEffect)(()=>{Z.Z.defaults.headers.common.Authorization="Bearer ".concat(window.sessionStorage.getItem("access_token"))},[]);let handleClickSubject=e=>{i!=e&&l(e)},handleDeleteSubject=(t,a)=>{var n;return a==i&&l(-1),Z.Z.delete("".concat(S._n,"/api/subjects"),{data:{subjectId:null===(n=e[a])||void 0===n?void 0:n.id}}).then(()=>updateStateListSubject())},handleChangeSubject=(t,a)=>(t.stopPropagation(),Z.Z.put("".concat(S._n,"/api/subjects"),{subjectId:e[a].id,title:t.currentTarget.value})),getListSubject=async()=>{let e=await Z.Z.get("".concat(S._n,"/api/subjects"));return e.data.subjects},getLearning=async()=>{let e=await Z.Z.get("".concat(S._n,"/api/learning"));return e.data.learning},createNewSubject=async()=>{let e=await getLearning();return Z.Z.post("".concat(S._n,"/api/subjects"),{learningId:null==e?void 0:e.id,title:"Untitled"}).then(e=>console.log("successfully created subject: ",e)).then(()=>updateStateListSubject()).catch(e=>console.log("failed to create new subject: ",e))},getListChapter=async e=>{let t=await Z.Z.get("".concat(S._n,"/api/chapters/").concat(e));return t.data.chapters},createNewChapter=async(t,a)=>{var n;return t.stopPropagation(),Z.Z.post("".concat(S._n,"/api/chapters"),{subjectId:null===(n=e[a])||void 0===n?void 0:n.id,title:"Untitled"}).then(()=>updateStateListChapter())},handleDeleteChapter=e=>{e==(null==c?void 0:c.chapterId)&&(null==c||c.setChapterId("")),Z.Z.delete("".concat(S._n,"/api/chapters"),{data:{chapterId:e}}).then(()=>updateStateListChapter())},handleChangeChapter=(e,t)=>{Z.Z.put("".concat(S._n,"/api/chapters"),{chapterId:e,title:t})},handleClickChapter=e=>{null==c||c.setChapterId(e)},updateStateListSubject=async()=>{let e=await getListSubject();t(e)},updateStateListChapter=async()=>{if(1e4!=i){var t;let a=await getListChapter(null===(t=e[i])||void 0===t?void 0:t.id);r(a)}};return(0,s.useEffect)(()=>{updateStateListChapter()},[i]),(0,s.useEffect)(()=>{updateStateListSubject()},[]),(0,n.jsxs)("div",{className:"side-bar",children:[(0,n.jsx)(NavBarBoxItem,{children:(0,n.jsxs)("p",{style:{fontWeight:"900",padding:"0px 10px",flexGrow:1},children:[" ","Recent"," "]})},"recent"),(0,n.jsx)(h.Z,{disablePadding:!0,sx:{maxHeight:"70vh",overflow:"auto"},children:e.map((e,t)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(NavListItemButton,{onClick:()=>handleClickSubject(t),children:(0,n.jsxs)(NavBarBoxItem,{children:[(0,n.jsx)(IconWrapper,{children:t==i?(0,n.jsx)(w.Z,{}):(0,n.jsx)(g.Z,{})}),(0,n.jsx)("span",{style:{marginLeft:"10px",whiteSpace:"nowrap",flex:1,overflow:"hidden",textOverflow:"ellipsis"},children:(0,n.jsx)(p.Z,{defaultValue:e.title,disableUnderline:!0,onChange:e=>handleChangeSubject(e,t)})}),(0,n.jsx)(u.Z,{title:"Delete subject",children:(0,n.jsx)(x.Z,{sx:{margin:0,padding:0,minWidth:"unset"},onClick:e=>handleDeleteSubject(e,t),children:(0,n.jsx)(IconWrapper,{bgcolor:"transparent",children:(0,n.jsx)(y.Z,{})})})}),(0,n.jsx)(u.Z,{title:"New chapter",children:(0,n.jsx)(x.Z,{sx:{margin:0,padding:0,minWidth:"unset"},onClick:e=>createNewChapter(e,t),children:(0,n.jsx)(IconWrapper,{bgcolor:"transparent",children:(0,n.jsx)(j.Z,{})})})})]},"".concat(e.id,"-item"))},e.id),(0,n.jsx)(ChapterList,{subjectIndex:t,chosenSubject:i,listChapter:a,handleDeleteChapter:handleDeleteChapter,handleClickChapter:handleClickChapter,handleChangeChapter:handleChangeChapter})]}))}),(0,n.jsx)("div",{style:{marginTop:"auto"},children:(0,n.jsxs)(x.Z,{sx:{backgroundColor:"#E8E8E8",color:"black",borderRadius:"100px",padding:"10px 20px"},onClick:createNewSubject,children:[(0,n.jsx)(j.Z,{sx:{marginRight:"10px"}})," New subject"]})})]})};var k=a(6350);a(7054);let Editor=e=>{let{onChange:t,initialContent:a,editable:r}=e,i=(0,k.bT)({initialContent:a?JSON.parse(a):void 0,onEditorContentChange:e=>{t(JSON.stringify(e.topLevelBlocks,null,2))}},[r]);return(0,s.useEffect)(()=>{},[]),(0,n.jsx)("div",{style:{overflow:"auto",width:"100%",height:"80%"},children:(0,n.jsx)(k.L6,{editor:i,theme:"light"})})};var I=a(4404);let FlashCard=e=>{let{onDelete:t,style:a,chooseFlashcard:r,edit:i,flashcardData:l,updateFlashcards:c,editing:d}=e,[o,h]=(0,s.useState)(!1),[p,j]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!1);useRootContext();let onChange=async e=>{Z.Z.put("".concat(S._n,"/api/flashcards"),{flashcardId:l.id,frontContent:g?l.front_content:e,backContent:g?e:l.back_content})},C={height:"300px",backgroundColor:"white",fontSize:"14px",borderRadius:"8px",overflowY:"auto",filter:"drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.25))",display:"flex",flexDirection:"column",...a};return(0,n.jsxs)("div",{className:"flashcard",style:C,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),onFocus:()=>{r(l.id)},children:[(0,n.jsxs)("header",{style:{display:"flex",flexDirection:"column",justifyContent:"center",width:"100%",padding:"8px"},children:[(0,n.jsx)("span",{style:{position:"absolute",alignSelf:"center",fontSize:"16px"},children:g?"Back":"Front"}),(0,n.jsx)("div",{style:{opacity:o?1:0,alignSelf:"flex-end"},children:(0,n.jsx)(u.Z,{title:"Delete",children:(0,n.jsx)(x.Z,{sx:{margin:0,padding:0,minWidth:"unset"},onClick:()=>t(l.id),children:(0,n.jsx)(IconWrapper,{children:(0,n.jsx)(y.Z,{})})})})})]}),(0,n.jsx)(I.Z,{variant:"middle",sx:{mb:1}}),(0,n.jsx)(Editor,{onChange:onChange,initialContent:g?l.back_content:l.front_content,editable:i}),(0,n.jsxs)("footer",{style:{display:"flex",flexGrow:1,alignItems:"center",justifyContent:"space-evenly"},children:[d&&(0,n.jsxs)(x.Z,{variant:"outlined",onClick:()=>{f(!g),c()},children:[" ","Flip"," "]}),p&&(0,n.jsx)(x.Z,{variant:"outlined",children:" Flip "})]})]})};var N=a(9927),F=a(4329),_=a(3027);let FlashcardDialog=e=>{let{children:t,chooseFlashcard:a,updateFlashcards:r}=e,[i,l]=(0,s.useState)(!0),[c,d]=(0,s.useState)(!1);return(0,n.jsx)(_.Z,{open:i,onClose:async()=>{l(!1),a(""),r()},children:t})},MainMenu=()=>{let[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)(""),[i,l]=(0,s.useState)(!1),c=useRootContext(),getFlashcards=async()=>{if((null==c?void 0:c.chapterId)!=""){let e=await Z.Z.get("".concat(S._n,"/api/flashcards/").concat(null==c?void 0:c.chapterId)).then(e=>e.data.flashcards);return e}return[]},addFlashcard=async()=>{Z.Z.post("".concat(S._n,"/api/flashcards"),{chapterId:null==c?void 0:c.chapterId,frontContent:"",backContent:""}).then(()=>updateFlashcards())},deleteFlashcard=async e=>{Z.Z.delete("".concat(S._n,"/api/flashcards"),{data:{flashcardId:e}}).then(()=>updateFlashcards())},updateFlashcards=async()=>{getFlashcards().then(e=>t(e)).then(()=>changeContent())},changeContent=()=>{l(!i)};return(0,s.useEffect)(()=>{updateFlashcards()},[null==c?void 0:c.chapterId]),(0,n.jsxs)("div",{className:"main-menu",style:{padding:"20px"},children:[(0,n.jsxs)("div",{className:"function-bar",style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[(0,n.jsxs)("span",{className:"name",style:{fontSize:"20px"},children:[" ","Flashcards"," "]}),(0,n.jsxs)("div",{className:"function",style:{display:"flex",gap:"10px"},children:[(0,n.jsx)(u.Z,{title:"Add flashcard",children:(0,n.jsx)(x.Z,{sx:{margin:0,padding:0,minWidth:"unset"},onClick:addFlashcard,children:(0,n.jsx)(IconWrapper,{children:(0,n.jsx)(N.Z,{})})})}),(0,n.jsx)(u.Z,{title:"Take a test",children:(0,n.jsx)(x.Z,{sx:{margin:0,padding:0,minWidth:"unset"},onClick:()=>null==c?void 0:c.setReadyTest(!0),children:(0,n.jsx)(IconWrapper,{children:(0,n.jsx)(F.Z,{})})})})]})]}),e&&(0,n.jsx)("div",{className:"flashcard-container",style:{display:"inline-grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"20px",width:"100%"},children:e.map((e,t)=>e.id==a?(0,n.jsx)(FlashcardDialog,{chooseFlashcard:r,updateFlashcards:updateFlashcards,children:(0,n.jsx)(FlashCard,{flashcardData:e,onDelete:deleteFlashcard,chooseFlashcard:r,edit:i,updateFlashcards:updateFlashcards,editing:!0,style:{width:"500px",height:"700px"}},e.id)},"".concat(e.id,"-dialog")):(0,n.jsx)(FlashCard,{flashcardData:e,onDelete:deleteFlashcard,chooseFlashcard:r,edit:i,updateFlashcards:updateFlashcards,editing:!1},"".concat(e.id,"-flashcard")))})]})};var E=a(4033),B=a(7473),L=a(7),R=a(2582);function IndeterminateCheckbox(e){let{subjectWithChapters:t}=e,[a,r]=s.useState(!1),[i,l]=s.useState(Array(t.chapters.length).fill(!1)),handleChildChange=e=>t=>{let a=[...i];a[e]=t.target.checked,l(a);let n=a.every(e=>e);r(n)};return(0,n.jsxs)(R.Z,{children:[(0,n.jsx)(L.Z,{control:(0,n.jsx)(B.Z,{checked:a,onChange:e=>{let a=e.target.checked;r(a),l(Array(t.chapters.length).fill(a))}}),label:t.title}),t.chapters.map((e,t)=>(0,n.jsx)(L.Z,{sx:{ml:3},control:(0,n.jsx)(B.Z,{checked:i[t],onChange:handleChildChange(t)}),label:"".concat(e.title)},t))]})}let ReadyTestMenu=()=>{let[e,t]=(0,s.useState)([]),getSubjectsWithChapters=async()=>{let e=await Z.Z.get("".concat(S._n,"/api/subjects")).then(e=>e.data.subjects),a=[];for(let t=0;t<e.length;t++){let n=await Z.Z.get("".concat(S._n,"/api/chapters/").concat(e[t].id)),s={id:e[t].id,title:e[t].title,chapters:n.data.chapters};a.push(s)}t(a)};return(0,s.useEffect)(()=>{getSubjectsWithChapters()},[]),(0,n.jsx)("div",{className:"ready-test-menu",style:{padding:"20px"},children:e.map(e=>(0,n.jsx)(IndeterminateCheckbox,{subjectWithChapters:e},"".concat(e.id,"-indeterminate-checkbox")))})},SideNavBarTest=()=>(0,n.jsxs)("div",{className:"side-bar",children:[(0,n.jsx)(NavBarBoxItem,{children:(0,n.jsx)("p",{style:{padding:"0px 10px",flexGrow:1,fontSize:"16px",textTransform:"uppercase"},children:"Select chapters for the test and start test your knowledge"})},"recent"),(0,n.jsxs)("div",{style:{display:"flex",marginTop:"auto",width:"100%",justifyContent:"space-evenly"},children:[(0,n.jsx)(x.Z,{sx:{backgroundColor:"#E8E8E8",color:"black",borderRadius:"100px",padding:"10px 20px"},children:"Start"}),(0,n.jsx)(x.Z,{sx:{backgroundColor:"#E8E8E8",color:"black",borderRadius:"100px",padding:"10px 20px"},children:"Cancel"})]})]});var app_page=()=>{let e=(0,E.useRouter)(),[t,a]=(0,s.useState)(!1),[r,i]=(0,s.useState)(""),[l,c]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{Z.Z.defaults.headers.common.Authorization="Bearer ".concat(window.sessionStorage.getItem("access_token"));let t=window.sessionStorage.getItem("access_token"),n=null!==t;a(n),n||e.push("/pages/auth/login")},[]),(0,s.useEffect)(()=>{},[r]),t)?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(m.Provider,{value:{chapterId:r,setChapterId:i,readyTest:l,setReadyTest:c},children:[(0,n.jsx)("header",{children:(0,n.jsx)(ButtonAppBar,{})}),(0,n.jsxs)("div",{className:"container",children:[!l&&(0,n.jsx)(SideNavBar,{}),l&&(0,n.jsx)(SideNavBarTest,{}),!l&&(0,n.jsx)(MainMenu,{}),l&&(0,n.jsx)(ReadyTestMenu,{})]})]})}):(0,n.jsx)("div",{children:"Hello"})}},8345:function(){}},function(e){e.O(0,[218,900,572,866,333,73,810,971,864,744],function(){return e(e.s=140)}),_N_E=e.O()}]);